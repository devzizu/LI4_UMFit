{"ast":null,"code":"var _jsxFileName = \"/home/linux/Documents/GIT/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/pages/funcionario/RemoveUser.tsx\";\nimport React from \"react\";\nimport \"../css/RemoveUser.css\";\nimport { IonPage, IonHeader, IonTitle, IonToolbar, IonContent, IonItem, IonLabel, IonSearchbar, IonList, IonIcon, IonButton } from \"@ionic/react\";\nimport { person, home, informationCircle, atCircle, closeCircleSharp } from 'ionicons/icons';\nimport { getAllUsers, selectUser, removeUser } from \"../../models/API/UserAPI\"; //const testing = true;\n\nconst noSelection = {\n  index: -1,\n  name: \"string\",\n  email: \"string\",\n  cat: \"string\",\n  localidade: \"string\"\n};\n\nclass RemoveUser extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = void 0;\n    this.state = {\n      query: \"\",\n      lista_inicial: [],\n      render_next: [],\n      show_next: noSelection\n    };\n  }\n\n  async componentDidMount() {\n    var init = [\"Email1\", \"email2\", \"oogle.1\", \"gloogloog.2\", \"net.net\", \"yeet@3\", \"3.@yeet\"];\n    await getAllUsers().then(async value => {\n      if (value.status === 200) {\n        var json = value.json();\n        await json.then(value => {\n          console.log(value);\n          init = value.users;\n        });\n      } else {\n        alert(\"REQUEST ERROR \" + value.status);\n      }\n    }).catch(function (error) {\n      alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n    });\n    init.splice(init.indexOf(this.props.email), 1);\n    this.setState({\n      lista_inicial: init,\n      render_next: init\n    });\n  }\n\n  selectUser(index) {\n    var selection = {\n      name: \"\",\n      email: \"\",\n      cat: \"\",\n      localidade: \"\",\n      index: index\n    }; //var apiCall:UserBasicInfo = {name:\"ByeBye\", email:\"net.net\", cat:\"Bot\", localidade:\"LocalHost\"} ;\n\n    if (index === this.state.show_next.index) selection = noSelection;else {\n      var res = selectUser(this.state.render_next[index]);\n      res.then(async value => {\n        if (value.status === 200) {\n          var json = value.json();\n          await json.then(value => {\n            const resValue = JSON.parse(value);\n            console.log(resValue.user);\n            selection = {\n              name: resValue.user.name,\n              email: resValue.user.email,\n              cat: resValue.user.cat,\n              localidade: resValue.user.localidade,\n              index: index\n            };\n            this.setState({\n              show_next: selection\n            });\n            console.log(\"USer Selected\");\n          });\n        } else {\n          alert(\"REQUEST ERROR \" + value.status);\n        }\n      }).catch(function (error) {\n        alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n      });\n    }\n    this.setState({\n      show_next: selection\n    });\n    console.log(\"END\");\n  }\n\n  removeUser(email) {\n    var res = removeUser(email, this.state.show_next.cat[0]);\n    res.then(async value => {\n      if (value.status === 200) {\n        alert(\"Utilizador Removido!\");\n      } else {\n        alert(\"REQUEST ERROR \" + value.status);\n      }\n    }).catch(function (error) {\n      alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n    });\n    var clearSelect = noSelection;\n    var renderBefore = this.state.lista_inicial;\n    renderBefore.splice(renderBefore.indexOf(email), 1);\n    this.setState({\n      show_next: clearSelect,\n      lista_inicial: renderBefore\n    });\n    this.setQuery(this.state.query);\n  }\n\n  setQuery(stringSearch) {\n    var resultado = this.state.lista_inicial.filter(function (value) {\n      return value.toLowerCase().indexOf(stringSearch.toLowerCase()) >= 0;\n    });\n    this.setState({\n      query: stringSearch,\n      render_next: resultado,\n      show_next: noSelection\n    });\n  }\n\n  render() {\n    var selected = this.state.show_next;\n    var renderList = this.state.render_next;\n    return React.createElement(IonPage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(IonHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(IonToolbar, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(IonTitle, {\n      id: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      className: \"icon\",\n      icon: closeCircleSharp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), \"Remover um Utilizador\"))), React.createElement(IonToolbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(IonSearchbar, {\n      value: this.state.query,\n      onIonChange: e => this.setQuery(e.detail.value),\n      placeholder: \"Email do utilizador...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })), React.createElement(IonContent, {\n      className: \"PageContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(IonList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, renderList.map((element, index) => React.createElement(IonItem, {\n      key: element,\n      className: \"item\",\n      button: true,\n      onClick: () => this.selectUser(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      className: \"icon\",\n      icon: atCircle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), selected.index === index ? React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(IonLabel, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, element), React.createElement(IonList, {\n      lines: \"none\",\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(IonItem, {\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: person,\n      className: \"icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      color: \"primary\",\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, selected.name)), React.createElement(IonItem, {\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: informationCircle,\n      className: \"icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      color: \"Dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, selected.cat)), React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: home,\n      className: \"icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      color: \"Dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, selected.localidade)), React.createElement(IonButton, {\n      color: \"danger\",\n      expand: \"block\",\n      onClick: () => this.removeUser(element),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"REMOVER\"))) : React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(IonLabel, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, element)))))));\n  }\n\n}\n\nexport default RemoveUser;","map":{"version":3,"sources":["/home/linux/Documents/GIT/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/pages/funcionario/RemoveUser.tsx"],"names":["React","IonPage","IonHeader","IonTitle","IonToolbar","IonContent","IonItem","IonLabel","IonSearchbar","IonList","IonIcon","IonButton","person","home","informationCircle","atCircle","closeCircleSharp","getAllUsers","selectUser","removeUser","noSelection","index","name","email","cat","localidade","RemoveUser","Component","constructor","props","state","query","lista_inicial","render_next","show_next","componentDidMount","init","then","value","status","json","console","log","users","alert","catch","error","concat","splice","indexOf","setState","selection","res","resValue","JSON","parse","user","clearSelect","renderBefore","setQuery","stringSearch","resultado","filter","toLowerCase","render","selected","renderList","e","detail","map","element"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport \"../css/RemoveUser.css\"\nimport { IonPage, IonHeader, IonTitle, IonToolbar, IonContent, IonItem, IonLabel, IonSearchbar, IonList, IonIcon, IonButton } from \"@ionic/react\";\nimport{person,home,informationCircle,atCircle, closeCircleSharp} from 'ionicons/icons'\nimport { getAllUsers, selectUser, removeUser } from \"../../models/API/UserAPI\";\n\n\n//const testing = true;\n\ninterface SelectedUser{\n    index:number,\n    name:string,\n    email:string,\n    cat:string,\n    localidade:string\n}\ninterface UserBasicInfo{\n    name:string,\n    email:string,\n    cat:string,\n    localidade:string\n}\n\nconst noSelection : SelectedUser = {index:-1, name:\"string\", email:\"string\", cat:\"string\", localidade:\"string\"}\n\nclass RemoveUser extends React.Component<any> {\n    state:{\n        query:string,\n        lista_inicial:string[],\n        render_next:string[],\n        show_next:SelectedUser\n    }\n\n    constructor(props: any) {\n\n        super(props);\n\n        this.state = {  \n            query : \"\",\n            lista_inicial: [],\n            render_next: [],\n            show_next :noSelection\n        }\n    }\n\n    async componentDidMount(){\n        \n        var init:string[]=[\"Email1\",\"email2\",\"oogle.1\",\"gloogloog.2\",\"net.net\",\"yeet@3\",\"3.@yeet\",];\n        \n        await getAllUsers()\n        .then(\n            async (value) =>{\n                if (value.status === 200) {              \n                    \n                    var json = value.json();\n\n                    await json.then((value) => {\n                        console.log(value);\n                        init= value.users;\n                    });\n               \n                    } else {\n                    alert(\"REQUEST ERROR \"+value.status);\n                }\n            }).catch(function(error) {\n              alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n            });\n    \n        init.splice(init.indexOf(this.props.email), 1);\n\n        this.setState({\n            lista_inicial: init,\n            render_next: init\n        })\n    }\n    selectUser(index:number):void{\n        var selection ={name:\"\", email:\"\", cat:\"\", localidade:\"\",index:index};\n        //var apiCall:UserBasicInfo = {name:\"ByeBye\", email:\"net.net\", cat:\"Bot\", localidade:\"LocalHost\"} ;\n        if(index===this.state.show_next.index) selection=noSelection; \n        else{\n        \n        var res = selectUser(this.state.render_next[index]);\n        res.then(\n            async (value) =>{\n                if (value.status === 200) {              \n                    var json = value.json();\n                    await json.then((value) =>  {\n                        const resValue = JSON.parse(value);\n                        console.log(resValue.user)\n                        selection = {name:resValue.user.name,\n                                    email:resValue.user.email,\n                                    cat:resValue.user.cat,\n                                    localidade:resValue.user.localidade,\n                                    index:index}\n                                    this.setState({show_next : selection})\n                        console.log(\"USer Selected\");\n                    });\n                } else {\n                    alert(\"REQUEST ERROR \"+value.status);\n                }\n            }).catch(function(error) {\n              alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n            });\n        \n    }\n    \n        this.setState({show_next : selection})\n        console.log(\"END\")\n    }\n\n    removeUser(email :string):void{\n        var res = removeUser(email,this.state.show_next.cat[0]);\n        res.then(\n            async (value) =>{\n                if (value.status === 200) {\n                    alert(\"Utilizador Removido!\")\n                } else {\n                    alert(\"REQUEST ERROR \"+value.status);\n                }\n            }).catch(function(error) {\n              alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n            });\n\n            \n        var clearSelect=noSelection;\n        var renderBefore = this.state.lista_inicial;\n        renderBefore.splice(renderBefore.indexOf(email),1);\n        this.setState({\n            show_next:clearSelect,\n            lista_inicial:renderBefore,\n        })\n        this.setQuery(this.state.query)\n    }\n\n    setQuery(stringSearch: any) {\n\n        \n        var resultado = this.state.lista_inicial\n            .filter(function(value){return value.toLowerCase().indexOf(stringSearch.toLowerCase()) >= 0;});\n        this.setState({\n        \n            query: stringSearch,\n            render_next: resultado,\n            show_next:noSelection\n        })\n         \n    \n    }\n    render() {\n        var selected= this.state.show_next;\n        var renderList = this.state.render_next;\n\n        return(\n            \n            <IonPage>\n\n                <IonHeader>\n                <IonToolbar color=\"primary\">\n                <IonTitle id=\"page-title\">\n                        <IonIcon className=\"icon\" icon ={closeCircleSharp}></IonIcon>\n                        Remover um Utilizador\n                    </IonTitle>\n                </IonToolbar>\n                </IonHeader>\n                <IonToolbar>\n                <IonSearchbar value={this.state.query} onIonChange={e => this.setQuery(e.detail.value!)} placeholder=\"Email do utilizador...\">\n                </IonSearchbar>\n                </IonToolbar>\n    \n                <IonContent className=\"PageContent\">\n                \n                <IonList>\n                {renderList.map(\n                (element,index)=>\n                <IonItem key={element} className=\"item\" button={true}  onClick={() =>this.selectUser(index)}>\n                    <IonIcon className=\"icon\" icon ={atCircle}></IonIcon>\n                    {selected.index===index?\n                    <React.Fragment >\n                    <IonLabel color=\"primary\" >{element}</IonLabel>\n                    <IonList lines=\"none\" className=\"inheritBackground\" >\n                            <IonItem className=\"inheritBackground\" >\n                            <IonIcon icon={person} className=\"icon\" ></IonIcon>\n                            <IonLabel color=\"primary\" className=\"inheritBackground\">{selected.name}</IonLabel>\n                            </IonItem>\n    \n                            <IonItem className=\"inheritBackground\">\n                            <IonIcon icon={informationCircle} className=\"icon\"></IonIcon> \n                                <IonLabel color=\"Dark\">{selected.cat}</IonLabel>\n                            </IonItem>\n                            <IonItem>\n                            <IonIcon icon={home} className=\"icon\" ></IonIcon> \n                                <IonLabel color=\"Dark\">{selected.localidade}</IonLabel>\n                            </IonItem>\n                            \n                                <IonButton color=\"danger\" expand=\"block\" onClick={()=>this.removeUser(element)}>\n                                    REMOVER     \n                                </IonButton>\n                              \n                    </IonList>\n                    </React.Fragment>\n                    \n                    :\n                    <React.Fragment>\n                    <IonLabel color=\"primary\" >{element}</IonLabel>\n                    </React.Fragment>\n                    }\n                    \n                    </IonItem> \n                    )}\n                \n                </IonList>\n                </IonContent>\n    \n            </IonPage>    \n        );\n    }\n    \n}\nexport default RemoveUser;"]},"metadata":{},"sourceType":"module"}