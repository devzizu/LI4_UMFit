{"ast":null,"code":"var _jsxFileName = \"/home/joao/Desktop/Projeto-LI4/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/pages/funcionario/RemoveUser.tsx\";\nimport React from \"react\";\nimport \"../css/RemoveUser.css\";\nimport { IonPage, IonHeader, IonTitle, IonToolbar, IonContent, IonItem, IonLabel, IonSearchbar, IonList, IonIcon, IonButton } from \"@ionic/react\";\nimport { person, home, informationCircle, atCircle } from 'ionicons/icons';\nimport { getAllUsers, selectUser, removeUser } from \"../../models/API/UserAPI\";\nconst testing = true;\nconst noSelection = {\n  index: -1,\n  name: \"string\",\n  email: \"string\",\n  cat: \"string\",\n  localidade: \"string\"\n};\n\nclass RemoveUser extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = void 0;\n    this.state = {\n      query: \"\",\n      lista_inicial: [],\n      render_next: [],\n      show_next: noSelection\n    };\n  }\n\n  componentDidMount() {\n    var init = [\"Email1\", \"email2\", \"oogle.1\", \"gloogloog.2\", \"net.net\", \"yeet@3\", \"3.@yeet\"];\n\n    if (!testing) {\n      var res = getAllUsers();\n      res.then(async value => {\n        if (value.status === 200) {\n          var json = value.json();\n          await json.then(value => {\n            const resValue = JSON.parse(value);\n            init = resValue.users;\n          });\n        } else {\n          alert(\"REQUEST ERROR \" + value.status);\n        }\n      }).catch(function (error) {\n        alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n      });\n    }\n\n    this.setState({\n      lista_inicial: init,\n      render_next: init\n    });\n  }\n\n  selectUser(index) {\n    var selection;\n    var apiCall = {\n      name: \"ByeBye\",\n      email: \"net.net\",\n      cat: \"Bot\",\n      localidade: \"LocalHost\"\n    };\n    if (index === this.state.show_next.index) selection = noSelection;else {\n      if (!testing) {\n        var res = selectUser(this.state.render_next[index]);\n        res.then(async value => {\n          if (value.status === 200) {\n            var json = value.json();\n            await json.then(value => {\n              const resValue = JSON.parse(value);\n              apiCall = resValue.user;\n            });\n          } else {\n            alert(\"REQUEST ERROR \" + value.status);\n          }\n        }).catch(function (error) {\n          alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n        });\n      }\n\n      selection = {\n        name: apiCall.name,\n        email: apiCall.email,\n        cat: apiCall.cat,\n        localidade: apiCall.localidade,\n        index: index\n      };\n    }\n    this.setState({\n      show_next: selection\n    });\n  }\n\n  removeUser(email) {\n    if (testing) {\n      console.log(email);\n      alert(\"Utilizador Removido!\");\n    } else {\n      var res = removeUser(email);\n      res.then(async value => {\n        if (value.status === 200) {\n          alert(\"Utilizador Removido!\");\n        } else {\n          alert(\"REQUEST ERROR \" + value.status);\n        }\n      }).catch(function (error) {\n        alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n      });\n    }\n\n    var clearSelect = noSelection;\n    var renderBefore = this.state.lista_inicial;\n    renderBefore.splice(renderBefore.indexOf(email), 1);\n    this.setState({\n      show_next: clearSelect,\n      lista_inicial: renderBefore\n    });\n    this.setQuery(this.state.query);\n  }\n\n  setQuery(stringSearch) {\n    var resultado = this.state.lista_inicial.filter(function (value) {\n      return value.toLowerCase().indexOf(stringSearch.toLowerCase()) >= 0;\n    });\n    this.setState({\n      query: stringSearch,\n      render_next: resultado,\n      show_next: noSelection\n    });\n  }\n\n  render() {\n    var selected = this.state.show_next;\n    var renderList = this.state.render_next;\n    return React.createElement(IonPage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(IonHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(IonToolbar, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(IonTitle, {\n      id: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Remover um Utilizador\"))), React.createElement(IonToolbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(IonSearchbar, {\n      value: this.state.query,\n      onIonChange: e => this.setQuery(e.detail.value),\n      placeholder: \"Email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })), React.createElement(IonContent, {\n      className: \"PageContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(IonList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, renderList.map((element, index) => React.createElement(IonItem, {\n      key: element,\n      className: \"item\",\n      button: true,\n      onClick: () => this.selectUser(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      className: \"icon\",\n      icon: atCircle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), selected.index === index ? React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(IonLabel, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, element), React.createElement(IonList, {\n      lines: \"none\",\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(IonItem, {\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: person,\n      className: \"icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      color: \"primary\",\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, selected.name)), React.createElement(IonItem, {\n      className: \"inheritBackground\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: informationCircle,\n      className: \"icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      color: \"Dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, selected.cat)), React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: home,\n      className: \"icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      color: \"Dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, selected.localidade)), React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(IonButton, {\n      color: \"danger\",\n      onClick: () => this.removeUser(element),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"REMOVER\")))) : React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(IonLabel, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, element)))))));\n  }\n\n}\n\nexport default RemoveUser;","map":{"version":3,"sources":["/home/joao/Desktop/Projeto-LI4/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/pages/funcionario/RemoveUser.tsx"],"names":["React","IonPage","IonHeader","IonTitle","IonToolbar","IonContent","IonItem","IonLabel","IonSearchbar","IonList","IonIcon","IonButton","person","home","informationCircle","atCircle","getAllUsers","selectUser","removeUser","testing","noSelection","index","name","email","cat","localidade","RemoveUser","Component","constructor","props","state","query","lista_inicial","render_next","show_next","componentDidMount","init","res","then","value","status","json","resValue","JSON","parse","users","alert","catch","error","concat","setState","selection","apiCall","user","console","log","clearSelect","renderBefore","splice","indexOf","setQuery","stringSearch","resultado","filter","toLowerCase","render","selected","renderList","e","detail","map","element"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport \"../css/RemoveUser.css\"\nimport { IonPage, IonHeader, IonTitle, IonToolbar, IonContent, IonItem, IonLabel, IonSearchbar, IonList, IonIcon, IonButton } from \"@ionic/react\";\nimport{person,home,informationCircle,atCircle} from 'ionicons/icons'\nimport { getAllUsers, selectUser, removeUser } from \"../../models/API/UserAPI\";\n\nconst testing : boolean =true;\ninterface SelectedUser{\n    index:number,\n    name:string,\n    email:string,\n    cat:string,\n    localidade:string\n}\ninterface UserBasicInfo{\n    name:string,\n    email:string,\n    cat:string,\n    localidade:string\n}\n\nconst noSelection : SelectedUser = {index:-1, name:\"string\", email:\"string\", cat:\"string\", localidade:\"string\"}\n\nclass RemoveUser extends React.Component<any> {\n    state:{\n        query:string,\n        lista_inicial:string[],\n        render_next:string[],\n        show_next:SelectedUser\n    }\n\n    constructor(props: any) {\n\n        super(props);\n\n        this.state = {  \n            query : \"\",\n            lista_inicial: [],\n            render_next: [],\n            show_next :noSelection\n        }\n    }\n    componentDidMount(){\n        var init:string[]=[\"Email1\",\"email2\",\"oogle.1\",\"gloogloog.2\",\"net.net\",\"yeet@3\",\"3.@yeet\",];\n        if (!testing){ var res = getAllUsers();\n        res.then(\n            async (value) =>{\n                if (value.status === 200) {              \n                    var json = value.json();\n                    await json.then((value) => {\n                        const resValue = JSON.parse(value);\n                        init= resValue.users;});\n                } else {\n                    alert(\"REQUEST ERROR \"+value.status);\n                }\n            }).catch(function(error) {\n              alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n            });\n    \n        }\n        this.setState({\n            lista_inicial: init,\n            render_next: init\n        })\n    }\n    selectUser(index:number):void{\n        var selection : SelectedUser;\n        var apiCall:UserBasicInfo = {name:\"ByeBye\", email:\"net.net\", cat:\"Bot\", localidade:\"LocalHost\"} ;\n        if(index===this.state.show_next.index) selection=noSelection; else{\n        if(!testing){\n            var res = selectUser(this.state.render_next[index]);\n        res.then(\n            async (value) =>{\n                if (value.status === 200) {              \n                    var json = value.json();\n                    await json.then((value) => {\n                        const resValue = JSON.parse(value);\n                        apiCall = resValue.user;});\n                } else {\n                    alert(\"REQUEST ERROR \"+value.status);\n                }\n            }).catch(function(error) {\n              alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n            });\n        }\n    \n        selection = {name:apiCall.name, email:apiCall.email, cat:apiCall.cat, localidade:apiCall.localidade,index:index}\n    }\n    \n        this.setState({\n            show_next : selection\n  \n        })\n    }\n\n    removeUser(email :string):void{\n        if(testing){console.log(email);alert(\"Utilizador Removido!\");}\n            else{\n                var res = removeUser(email);\n        res.then(\n            async (value) =>{\n                if (value.status === 200) {\n                    alert(\"Utilizador Removido!\")\n                } else {\n                    alert(\"REQUEST ERROR \"+value.status);\n                }\n            }).catch(function(error) {\n              alert(\"Server is currently down... \\n\\n\".concat(\"Error details: \\n\\n\\t\").concat(error));\n            });\n\n            }\n        var clearSelect=noSelection;\n        var renderBefore = this.state.lista_inicial;\n        renderBefore.splice(renderBefore.indexOf(email),1);\n        this.setState({\n            show_next:clearSelect,\n            lista_inicial:renderBefore,\n        })\n        this.setQuery(this.state.query)\n    }\n\n    setQuery(stringSearch: any) {\n\n        \n        var resultado = this.state.lista_inicial\n            .filter(function(value){return value.toLowerCase().indexOf(stringSearch.toLowerCase()) >= 0;});\n        this.setState({\n        \n            query: stringSearch,\n            render_next: resultado,\n            show_next:noSelection\n        })\n         \n    \n    }\n    render() {\n        var selected= this.state.show_next;\n        var renderList = this.state.render_next;\n\n                 \n        \n        return(\n            \n            <IonPage>\n\n                <IonHeader>\n                <IonToolbar color=\"primary\">\n                    <IonTitle id=\"page-title\">Remover um Utilizador</IonTitle>\n                </IonToolbar>\n                </IonHeader>\n                <IonToolbar>\n                <IonSearchbar value={this.state.query} onIonChange={e => this.setQuery(e.detail.value!)} placeholder=\"Email\">\n                </IonSearchbar>\n                </IonToolbar>\n    \n                <IonContent className=\"PageContent\">\n                \n                <IonList>\n                {renderList.map(\n                (element,index)=>\n                <IonItem key={element} className=\"item\" button={true}  onClick={() =>this.selectUser(index)}>\n                    <IonIcon className=\"icon\" icon ={atCircle}></IonIcon>\n                    {selected.index===index?\n                    <React.Fragment >\n                    <IonLabel color=\"primary\" >{element}</IonLabel>\n                    <IonList lines=\"none\" className=\"inheritBackground\" >\n                            <IonItem className=\"inheritBackground\" >\n                            <IonIcon icon={person} className=\"icon\" ></IonIcon>\n                            <IonLabel color=\"primary\" className=\"inheritBackground\">{selected.name}</IonLabel>\n                            </IonItem>\n    \n                            <IonItem className=\"inheritBackground\">\n                            <IonIcon icon={informationCircle} className=\"icon\"></IonIcon> \n                                <IonLabel color=\"Dark\">{selected.cat}</IonLabel>\n                            </IonItem>\n                            <IonItem>\n                            <IonIcon icon={home} className=\"icon\" ></IonIcon> \n                                <IonLabel color=\"Dark\">{selected.localidade}</IonLabel>\n                            </IonItem>\n                            <IonItem>\n                                <IonButton color=\"danger\" onClick={()=>this.removeUser(element)}>\n                                    REMOVER\n                                    \n                                </IonButton>\n                            </IonItem>  \n                    </IonList>\n                    </React.Fragment>\n                    \n                    :\n                    <React.Fragment>\n                    <IonLabel color=\"primary\" >{element}</IonLabel>\n                    </React.Fragment>\n                    }\n                    \n                    </IonItem> \n                    )}\n                \n                </IonList>\n                </IonContent>\n    \n            </IonPage>    \n        );\n    }\n    \n}\nexport default RemoveUser;"]},"metadata":{},"sourceType":"module"}