{"ast":null,"code":"var _jsxFileName = \"/home/hc/Desktop/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/App.tsx\";\nimport { IonApp, IonCard, IonCardContent, IonCardHeader, IonContent, IonHeader, IonPage, IonRouterOutlet, IonSplitPane, IonTitle, IonToolbar } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\n/* Core CSS required for Ionic components to work properly */\n\nimport '@ionic/react/css/core.css';\nimport '@ionic/react/css/display.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/float-elements.css';\n/* Basic CSS for apps built with Ionic */\n\nimport '@ionic/react/css/normalize.css';\n/* Optional CSS utils that can be commented out */\n\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/typography.css';\nimport React from 'react';\nimport { Redirect, Route } from 'react-router-dom'; //---------------------------------------------------------------------------------------\n//---------------------------------------------------------------------------------------\n\nimport './components/css/LogIn.css';\nimport Menu from './components/MenuHome'; //---------------------------------------------------------------------------------------\n//---------------------------------------------------------------------------------------\n\nimport { getUserStatus, logout } from './models/API/UserAPI';\nimport { User } from './models/Other/User';\nimport About from './pages/About';\nimport Contact from './pages/Contact';\nimport './pages/css/404.css';\nimport './pages/css/Home.css';\n\n/* Theme variables */\nimport './theme/variables.css';\n\n//---------------------------------------------------------------------------------------\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = void 0;\n\n    this.setLogged = (logged, user) => {\n      if (logged === false) {\n        var lastToken = localStorage.getItem('token');\n        if (lastToken) logout(lastToken);\n        localStorage.clear();\n      }\n\n      var cat;\n      var menuss;\n\n      if (logged) {\n        cat = user.categoria;\n        menuss = user.tipoDeUser === \"Cliente\" ? cat : user.tipoDeUser;\n      }\n\n      this.setState({\n        logged: logged,\n        menus: logged ? menuss : 'home',\n        userLogged: user\n      });\n    };\n\n    this.state = {\n      selectedPage: '',\n      menus: 'home',\n      logged: false,\n      openPane: false,\n      loadingAPIcall: true,\n      //loadingAPIcall: false,\n      userLogged: new User(\"\", \"\", -1, \"\", -1, \"\", \"\", \"\")\n    };\n  }\n\n  async componentDidMount() {\n    console.log(\"com..DidMount() -> updating state...\");\n    var tokenFromStorage = localStorage.getItem('token');\n    console.log(\"TOKEN = \" + tokenFromStorage); //existe token da sessao\n\n    if (tokenFromStorage != null) {\n      await getUserStatus(tokenFromStorage).then(res => res.json()).then(data => {\n        const res = JSON.parse(data);\n\n        if (res.status === \"online\") {\n          var userMenus = res.user.categoria;\n          this.setState({\n            logged: true,\n            menus: res.user.tipoDeUser === \"Cliente\" ? userMenus : res.user.tipoDeUser,\n            loadingAPIcall: false,\n            userLogged: res.user\n          }); //Token invalido\n        } else if (res.status === \"offline\") {\n          localStorage.clear();\n          this.setState({\n            logged: false,\n            menus: 'home',\n            loadingAPIcall: false,\n            userLogged: null\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    } else {\n      //Nao existe token no localstorage\n      this.setState({\n        logged: false,\n        menus: 'home',\n        loadingAPIcall: false,\n        userLogged: null\n      });\n    }\n  }\n\n  render() {\n    console.log(\"[...] Rendering App component...\");\n    var logged = this.state.logged;\n    var user = this.state.userLogged;\n    return React.createElement(IonApp, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, this.state.loadingAPIcall ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }) : React.createElement(IonReactRouter, {\n      basename: process.env.PUBLIC_URL,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(IonSplitPane, {\n      id: \"split-pane\",\n      contentId: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Menu, {\n      selectedPage: this.state.selectedPage,\n      menus: this.state.menus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }), React.createElement(IonRouterOutlet, {\n      id: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/li4_umfit\",\n      component: props => {\n        return React.createElement(Redirect, {\n          to: \"/home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/home\",\n      component: props => {\n        if (logged) {\n          return React.createElement(Redirect, {\n            to: \"/profile\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          });\n        }\n\n        return React.createElement(Home, Object.assign({\n          logged: logged\n        }, props, {\n          setLogged: this.setLogged,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/about\",\n      component: About,\n      exact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/contact\",\n      component: Contact,\n      exact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/profile\",\n      component: props => {\n        if (!logged) {\n          return React.createElement(Redirect, {\n            to: \"/home\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 217\n            },\n            __self: this\n          });\n        }\n\n        switch (user.tipoDeUser) {\n          case 'Cliente':\n            return React.createElement(ProfileCliente, {\n              setLogged: this.setLogged,\n              user: this.state.userLogged,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 224\n              },\n              __self: this\n            });\n\n          case 'Instrutor':\n            return React.createElement(ProfileTreinador, {\n              setLogged: this.setLogged,\n              user: this.state.userLogged,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 228\n              },\n              __self: this\n            });\n\n          case 'Rececionista':\n            return React.createElement(ProfileFuncionario, {\n              setLogged: this.setLogged,\n              user: this.state.userLogged,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 232\n              },\n              __self: this\n            });\n\n          default:\n            break;\n        }\n\n        return React.createElement(ProfileCliente, {\n          setLogged: this.setLogged,\n          user: this.state.userLogged,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      exact: true,\n      from: \"/\",\n      to: \"/home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    })))));\n  }\n\n}\n\n;\nexport default App; //---------------------------------------------------------------------------------------\n\nclass Home extends React.Component {\n  render() {\n    return React.createElement(IonPage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(IonHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(IonToolbar, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(IonButtons, {\n      slot: \"start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(IonMenuButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    })), React.createElement(IonTitle, {\n      id: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"404 - P\\xE1gina inexistente\"))), React.createElement(IonContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(IonCard, {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(IonCardHeader, {\n      className: \"card404\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: require('./imgs/404_icon.png'),\n      width: \"20%\",\n      height: \"250\",\n      alt: \"Loading...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    })), React.createElement(IonCardContent, {\n      className: \"card404\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, \"A p\\xE1gina que est\\xE1 a tentar aceder foi removida ou n\\xE3o existe...saia do sistema e volte a tentar de novo.\"))));\n  }\n\n} // a85729@alunos.uminho.pt STD\n// a83719@alunos.uminho.pt PRM\n// a85227@alunos.uminho.pt INS\n// a84656@alunos.uminho.pt REC","map":{"version":3,"sources":["/home/hc/Desktop/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/App.tsx"],"names":["IonApp","IonCard","IonCardContent","IonCardHeader","IonContent","IonHeader","IonPage","IonRouterOutlet","IonSplitPane","IonTitle","IonToolbar","IonReactRouter","React","Redirect","Route","Menu","getUserStatus","logout","User","About","Contact","App","Component","constructor","props","state","setLogged","logged","user","lastToken","localStorage","getItem","clear","cat","menuss","categoria","tipoDeUser","setState","menus","userLogged","selectedPage","openPane","loadingAPIcall","componentDidMount","console","log","tokenFromStorage","then","res","json","data","JSON","parse","status","userMenus","catch","error","render","process","env","PUBLIC_URL","Home","require"],"mappings":"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","sourcesContent":["import { IonApp, IonButton, IonCard, IonCardContent, IonCardHeader, IonContent, IonHeader, IonInput, IonPage, IonRouterOutlet, IonSplitPane, IonText, IonTitle, IonToolbar, IonLoading } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\nimport '@ionic/react/css/display.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/float-elements.css';\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/typography.css';\nimport sha256 from \"fast-sha256\";\nimport React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\n//---------------------------------------------------------------------------------------\n//---------------------------------------------------------------------------------------\nimport './components/css/LogIn.css';\nimport Menu from './components/MenuHome';\n//---------------------------------------------------------------------------------------\n//---------------------------------------------------------------------------------------\nimport { authenticate, getUserStatus, logout } from './models/API/UserAPI';\nimport { User } from './models/Other/User';\nimport About from './pages/About';\nimport ConsultarAulasGrupo from './pages/ConsultarAulasGrupo';\nimport Contact from './pages/Contact';\nimport './pages/css/404.css';\nimport './pages/css/Home.css';\nimport EditarUtilizador from './pages/funcionario/EditarUtilizador';\nimport InserirUtilizador from './pages/funcionario/InserirUtilizador';\nimport RemoveUser from './pages/funcionario/RemoveUser';\nimport CriarAvaliacao from './pages/instrutor/CriarAvaliacao';\nimport CriarPlanoAlimentar from './pages/instrutor/CriarPlanoAlimentar';\nimport CriarPlanoTreino from './pages/instrutor/CriarPlanoTreino';\nimport UltimaAvaliacaoInstrutor from './pages/instrutor/UltimaAvaliacaoInstrutor';\nimport UpdateDetails from './pages/UpdateDetails';\nimport AgendarAvaliacao from './pages/user/AgendarAvaliacao';\nimport Evolucao from './pages/user/EvolucaoPage/Evolucao';\nimport ShowPlanoTreino from './pages/user/ShowPlanoTreino';\nimport UltimaAvaliacao from './pages/user/UltimaAvaliacao';\nimport UserProfile from './pages/UserProfile';\n/* Theme variables */\nimport './theme/variables.css';\nimport ShowPlanoAlimentar from './pages/user/ShowPlanoAlimentar';\nimport EditarAulasGrupo from './pages/funcionario/EditarAulasGrupo';\n\n\n\n\n\n\n\n\n\n//---------------------------------------------------------------------------------------\n\nclass App extends React.Component {\n\n  state: {\n    selectedPage: string,\n    menus: string,\n    logged: boolean,\n    loadingAPIcall: boolean,\n    userLogged: User,\n    openPane:boolean\n  }\n  \n  setLogged = (logged: boolean, user: User) => {\n\n    if (logged === false) {\n      \n      var lastToken = localStorage.getItem('token');\n\n      if (lastToken)\n        logout(lastToken);\n\n      localStorage.clear();\n    }\n\n    var cat;\n    var menuss;\n\n    if (logged) {\n      cat = user.categoria\n      menuss = user.tipoDeUser === \"Cliente\" ? cat : user.tipoDeUser   \n    }\n\n    this.setState({ \n      logged: logged, \n      menus: logged ? menuss : 'home',\n      userLogged: user\n    });\n\n  };\n\n  constructor(props: any) {\n    \n    super(props);\n\n    this.state = {\n      selectedPage: '',\n      menus: 'home',\n      logged: false,\n      openPane : false,\n      loadingAPIcall: true,\n      //loadingAPIcall: false,\n      userLogged: new User(\"\", \"\", -1, \"\", -1, \"\", \"\", \"\")\n    };\n\n  }\n\n\n  async componentDidMount() {\n\n    console.log(\"com..DidMount() -> updating state...\");\n\n    var tokenFromStorage = localStorage.getItem('token');\n    console.log(\"TOKEN = \" + tokenFromStorage);\n    //existe token da sessao\n    if (tokenFromStorage != null) {\n\n      await getUserStatus(tokenFromStorage)\n            .then(res => res.json())\n            .then((data) => {\n\n        const res = JSON.parse(data);\n\n        if (res.status === \"online\") {\n          \n          var userMenus = res.user.categoria\n          \n          this.setState({\n            logged: true,\n            menus: res.user.tipoDeUser === \"Cliente\" ? userMenus : res.user.tipoDeUser,\n            loadingAPIcall: false,\n            userLogged: res.user\n          });\n        \n        //Token invalido\n        } else if (res.status === \"offline\") {\n\n          localStorage.clear();\n\n          this.setState({\n            logged: false,\n            menus: 'home',\n            loadingAPIcall: false,\n            userLogged: null,\n          });\n        \n        }\n\n      }).catch(function(error) {\n\n        console.log(error);\n      });   \n\n    } else { //Nao existe token no localstorage\n\n      this.setState({\n        logged: false,\n        menus: 'home',\n        loadingAPIcall: false,\n        userLogged: null,\n      });\n    \n    }\n  }\n\n  render() {\n\n    console.log(\"[...] Rendering App component...\");\n\n    var logged = this.state.logged;\n    var user = this.state.userLogged;\n\n    return (\n        <IonApp>\n   \n          {\n            this.state.loadingAPIcall  ?<div></div> : (\n              <IonReactRouter basename ={process.env.PUBLIC_URL} >\n            \n              <IonSplitPane  id=\"split-pane\" contentId=\"main\">\n                <Menu selectedPage={this.state.selectedPage} menus={this.state.menus}/>\n                  \n                  <IonRouterOutlet id=\"main\">\n                  <Route path=\"/li4_umfit\" component={(props: any) => {\n                    return <Redirect to=\"/home\" />;\n                    }} />\n                    <Route path=\"/home\" component={(props: any) => {\n                      \n                      if (logged) {\n                        \n                        return <Redirect to=\"/profile\" />;\n                      } \n                      \n                      return <Home logged={logged} {...props} setLogged={this.setLogged}/>;\n    \n                    }} />\n                    \n                    <Route path=\"/about\" component={About} exact={true} />\n                                        \n                    <Route path=\"/contact\" component={Contact} exact={true} />                          \n                    \n                    {/* Routas de teste como públicas, dps remover */}\n\n                    {/* ------------------------------------------ */}\n\n                    <Route path=\"/profile\" component={(props: any) => {\n                      \n                      if (!logged) {\n                        \n                        return <Redirect to=\"/home\" />;\n                      }\n\n                      switch(user.tipoDeUser) {\n\n                        case 'Cliente': \n\n                          return <ProfileCliente setLogged={this.setLogged} user={this.state.userLogged}/>;\n\n                        case 'Instrutor': \n                \n                          return <ProfileTreinador setLogged={this.setLogged} user={this.state.userLogged}/>;\n\n                        case 'Rececionista': \n                          \n                          return <ProfileFuncionario setLogged={this.setLogged} user={this.state.userLogged}/>;                          \n\n                        default: break;\n                      }\n\n                      return <ProfileCliente setLogged={this.setLogged} user={this.state.userLogged}/>;\n    \n                    }} />\n    \n                    <Redirect exact from=\"/\" to=\"/home\" />\n                  \n                  </IonRouterOutlet>\n                  \n    \n              </IonSplitPane>\n            </IonReactRouter>\n                \n            )\n          }\n        </IonApp>\n      );\n  }\n};\n\nexport default App;\n\n//---------------------------------------------------------------------------------------\n\nclass Home extends React.Component<any> {\n\n  render() {\n\n    return (\n      <IonPage>\n\n\n        \n        <IonHeader>\n        <IonToolbar color=\"primary\">\n          <IonButtons slot=\"start\">\n            <IonMenuButton />\n          </IonButtons>\n          <IonTitle id=\"page-title\">404 - Página inexistente</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent>\n\n            <IonCard className=\"wrapper\">\n\n              <IonCardHeader className=\"card404\">\n                <img src={require('./imgs/404_icon.png')} width=\"20%\" height=\"250\" alt=\"Loading...\"/> \n              </IonCardHeader>\n\n              <IonCardContent className=\"card404\">\n                A página que está a tentar aceder foi removida ou não existe...saia do sistema e volte a tentar de novo.\n              </IonCardContent>\n          </IonCard>\n          \n        </IonContent>\n\n      </IonPage>\n\n    );\n\n  }\n}\n// a85729@alunos.uminho.pt STD\n// a83719@alunos.uminho.pt PRM\n// a85227@alunos.uminho.pt INS\n// a84656@alunos.uminho.pt REC\n"]},"metadata":{},"sourceType":"module"}