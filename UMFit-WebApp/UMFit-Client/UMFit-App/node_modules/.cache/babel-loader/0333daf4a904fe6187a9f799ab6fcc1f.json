{"ast":null,"code":"var _jsxFileName = \"/home/joao/Desktop/Projeto-LI4/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/pages/user/AgendarAvaliacao.tsx\";\nimport { IonButton, IonCard, IonCardHeader, IonCardTitle, IonContent, IonDatetime, IonHeader, IonIcon, IonItem, IonLabel, IonList, IonPage, IonRow, IonSearchbar, IonTitle, IonToolbar } from \"@ionic/react\";\nimport { calendarOutline, personCircle, personCircleOutline } from \"ionicons/icons\";\nimport React from \"react\";\nimport { getAvaliacoesAgendadas, setAvaliacao } from \"../../models/API/EvolucaoAPI\";\nimport { getInstrutores } from \"../../models/API/UserAPI\";\nimport './css/AgendarAvaliacao.css';\nconst avalInicial = {\n  data: new Date().toLocaleString(),\n  instrutor_nome: \"\",\n  instrutor_email: \"\"\n};\nconst searchInit = {\n  query: \"\",\n  list_init: [],\n  list_now: []\n};\n\nclass AgendarAvaliacao extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = void 0;\n    this.state = {\n      email: props.email,\n      aval: avalInicial,\n      avals: [],\n      instrutores: new Map(),\n      pickInstrutor: searchInit\n    };\n  }\n\n  async componentDidMount() {\n    var avals = [];\n    var map = new Map();\n    var pick = this.state.pickInstrutor;\n    const res = await getAvaliacoesAgendadas(this.state.email);\n    const res2 = await getInstrutores();\n    await res.json().then(data => {\n      avals = JSON.parse(data).avaliacoes;\n    });\n    await res2.json().then(data => {\n      var ret = data.instrutores;\n      var i;\n\n      for (i in ret) {\n        map.set(i, ret[i]);\n        pick.list_init.push(i);\n      }\n    });\n    this.setState({\n      avals: avals,\n      pickInstrutor: pick,\n      instrutores: map\n    });\n  }\n\n  setDate(date) {\n    var aval = this.state.aval;\n    aval.data = date;\n    this.setState({\n      aval: aval\n    });\n  }\n\n  setQuery(query) {\n    console.log(this.state);\n    var pick = this.state.pickInstrutor;\n    pick.query = query;\n\n    if (query === \"\") {\n      pick.list_now = [];\n    } else {\n      pick.list_now = this.state.pickInstrutor.list_init.filter(value => value.toLowerCase().indexOf(query.toLowerCase()) >= 0).slice(0, 4);\n    }\n\n    this.setState({\n      pickInstrutor: pick\n    });\n  }\n\n  async selectInstrutor(mail) {\n    var aval = this.state.aval;\n    var st = this.state.instrutores.get(mail);\n    var nome = st ? st : \"\";\n    console.log(st);\n    var resetSearch = {\n      query: \"\",\n      list_now: [],\n      list_init: this.state.pickInstrutor.list_init\n    };\n    aval.instrutor_email = mail;\n    aval.instrutor_nome = nome;\n    this.setState({\n      aval: aval,\n      pickInstrutor: resetSearch\n    });\n  }\n\n  setAgendacao() {\n    setAvaliacao(this.state.email, this.state.aval).then(data => {\n      console.log(data.status);\n    });\n    alert(\"Avaliação Marcada\");\n    window.location.reload();\n  }\n\n  render() {\n    var localVals = this.state.avals;\n    return React.createElement(IonPage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(IonHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(IonToolbar, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(IonTitle, {\n      id: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Agenda de Avalia\\xE7\\xF5es\"))), React.createElement(IonContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(IonCard, {\n      className: \"cardAval\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(IonCardHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(IonCardTitle, {\n      className: \"cardTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Agendar Avalia\\xE7\\xE3o\"), \" \"), React.createElement(IonButton, {\n      color: \"success\",\n      onClick: () => this.setAgendacao(),\n      slot: \"end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Submeter\"))), React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: calendarOutline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      className: \"data\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"\\xA0\"), \"Data:\"), React.createElement(IonDatetime, {\n      displayFormat: \"DD-MM-YYYY HH:mm\",\n      value: this.state.aval.data,\n      onIonChange: e => this.setDate(e.detail.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    })), React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: personCircleOutline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"\\xA0Instrutor:\"), React.createElement(IonLabel, {\n      slot: \"end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, this.state.aval.instrutor_nome)), React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(IonLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Instrutor:\"), React.createElement(IonToolbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(IonSearchbar, {\n      value: this.state.pickInstrutor.query,\n      onIonChange: e => this.setQuery(e.detail.value),\n      placeholder: \"Email do instrutor...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }))), this.state.pickInstrutor.list_now.length !== 0 ? React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(IonList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, this.state.pickInstrutor.list_now.map(element => {\n      return React.createElement(IonItem, {\n        key: element,\n        className: \"item\",\n        button: true,\n        onClick: () => this.selectInstrutor(element),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(IonIcon, {\n        className: \"icon\",\n        icon: personCircle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(IonLabel, {\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, element));\n    }))) : React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })), React.createElement(IonRow, {\n      className: \"avalRow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, localVals.map(elem => React.createElement(IonCard, {\n      key: elem.data + elem.instrutor_nome,\n      className: \"cardCol\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: calendarOutline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"\\xA0Data: \", elem.data)), React.createElement(IonItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(IonIcon, {\n      icon: personCircleOutline,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(IonLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"\\xA0Instrutor: \", elem.instrutor_nome))))), React.createElement(IonCard, {\n      className: \"cardAval\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default AgendarAvaliacao;","map":{"version":3,"sources":["/home/joao/Desktop/Projeto-LI4/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/src/pages/user/AgendarAvaliacao.tsx"],"names":["IonButton","IonCard","IonCardHeader","IonCardTitle","IonContent","IonDatetime","IonHeader","IonIcon","IonItem","IonLabel","IonList","IonPage","IonRow","IonSearchbar","IonTitle","IonToolbar","calendarOutline","personCircle","personCircleOutline","React","getAvaliacoesAgendadas","setAvaliacao","getInstrutores","avalInicial","data","Date","toLocaleString","instrutor_nome","instrutor_email","searchInit","query","list_init","list_now","AgendarAvaliacao","Component","constructor","props","state","email","aval","avals","instrutores","Map","pickInstrutor","componentDidMount","map","pick","res","res2","json","then","JSON","parse","avaliacoes","ret","i","set","push","setState","setDate","date","setQuery","console","log","filter","value","toLowerCase","indexOf","slice","selectInstrutor","mail","st","get","nome","resetSearch","setAgendacao","status","alert","window","location","reload","render","localVals","e","detail","length","element","elem"],"mappings":"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","sourcesContent":["import { IonButton, IonCard, IonCardHeader, IonCardTitle, IonContent, IonDatetime, IonHeader, IonIcon, IonItem, IonLabel, IonList, IonPage, IonRow, IonSearchbar, IonTitle, IonToolbar, IonFooter } from \"@ionic/react\";\nimport { calendarOutline, personCircle, personCircleOutline } from \"ionicons/icons\";\nimport React from \"react\";\nimport { getAvaliacoesAgendadas, setAvaliacao } from \"../../models/API/EvolucaoAPI\";\nimport { getInstrutores } from \"../../models/API/UserAPI\";\nimport './css/AgendarAvaliacao.css';\n\n\n\nexport interface AvaliacaoAgendada{\n    data : string\n    instrutor_nome : string\n    instrutor_email : string\n}\n\n\ninterface SearchBar{\n    query : string;\n    list_init : string[];\n    list_now : string[]\n}\nconst avalInicial : AvaliacaoAgendada  = {\n    data : new Date().toLocaleString(),\n    instrutor_nome : \"\",\n    instrutor_email: \"\"\n}\nconst searchInit : SearchBar = {\n    query : \"\",\n    list_init : [],\n    list_now : []\n}\n\nclass AgendarAvaliacao extends React.Component<any>{\n    state:{\n        email : string;\n        aval : AvaliacaoAgendada;\n        avals : AvaliacaoAgendada[];\n        instrutores : Map<string,string>;\n       pickInstrutor : SearchBar; \n    }\n\n    constructor(props : any){\n        super(props);\n        this.state={\n            email :props.email,\n            aval : avalInicial,\n            avals : [],\n            instrutores : new Map(),\n            pickInstrutor : searchInit\n        }\n    }\n    \n    async componentDidMount(){\n        var avals : AvaliacaoAgendada[] =[];\n        var map : Map<string,string> = new Map<string,string>() ;\n        var pick : SearchBar = this.state.pickInstrutor;\n        const res = (await getAvaliacoesAgendadas(this.state.email));\n        const res2 = (await getInstrutores());\n        await res.json().then((data)=>{\n\n            avals = JSON.parse(data).avaliacoes;\n        });\n        await res2.json().then((data)=>{\n            var ret = data.instrutores;\n            var i;\n            for( i in ret){\n           map.set(i,ret[i]);\n           pick.list_init.push(i);\n        }\n        });\n\n        \n        this.setState({ avals: avals, pickInstrutor :pick ,instrutores : map });\n    }\n\n    setDate(date : string){\n        var aval : AvaliacaoAgendada = this.state.aval;\n        aval.data=date;\n        this.setState({aval : aval });\n    }\n    setQuery(query : string){\n        console.log(this.state);\n        var pick = this.state.pickInstrutor;\n        pick.query = query;\n        if(query===\"\"){pick.list_now=[]}\n            else{\n        pick.list_now = (this.state.pickInstrutor.list_init.filter((value)=> value.toLowerCase().indexOf(query.toLowerCase()) >= 0)).slice(0,4);}\n        this.setState({\n            pickInstrutor : pick\n        })\n\n    }\n   async selectInstrutor(mail: string) {\n        var aval = this.state.aval;\n        var st = this.state.instrutores.get(mail);\n        var nome = st ? st : \"\" ;\n        console.log(st);\n        \n        var resetSearch :SearchBar ={query: \"\",list_now :[],list_init : this.state.pickInstrutor.list_init } \n        \n\n\n        aval.instrutor_email = mail;    \n        aval.instrutor_nome = nome;\n        this.setState({ aval: aval, pickInstrutor: resetSearch })\n    }\n\n    setAgendacao() {\n        setAvaliacao(this.state.email,this.state.aval).then(\n            (data) => {\n                console.log(data.status);\n            }\n        )\n        alert(\"Avaliação Marcada\");\n        window.location.reload();\n    }\n\n\n    render(){\n        var localVals = this.state.avals;\n    \n        \n\n\n\n\n        return(\n            <IonPage>\n    \n            <IonHeader>\n              <IonToolbar color=\"primary\">\n                <IonTitle id=\"page-title\">Agenda de Avaliações</IonTitle>\n              </IonToolbar>\n            </IonHeader>\n            <IonContent>\n    \n    <IonCard className=\"cardAval\">\n        <IonCardHeader>\n            <IonItem>\n        <IonCardTitle className = \"cardTitle\"><b>Agendar Avaliação</b> </IonCardTitle>\n        <IonButton color=\"success\" onClick={()=>this.setAgendacao()} slot=\"end\">\n            Submeter\n        </IonButton>\n        </IonItem>\n        </IonCardHeader>\n        <IonItem>\n\n        <IonIcon icon={calendarOutline}></IonIcon>\n        <IonLabel className=\"data\" > <b>&nbsp;</b>Data:</IonLabel>\n              <IonDatetime  displayFormat=\"DD-MM-YYYY HH:mm\" value={this.state.aval.data} onIonChange={e => this.setDate(e.detail.value!)}></IonDatetime>\n\n        </IonItem>\n        <IonItem>\n        <IonIcon icon={personCircleOutline}></IonIcon>\n        <IonLabel>\n        &nbsp;Instrutor: \n        </IonLabel>\n        <IonLabel slot=\"end\">\n              {this.state.aval.instrutor_nome}\n        </IonLabel>\n    </IonItem>\n        <IonItem>\n              <IonLabel>Instrutor:</IonLabel>\n              <IonToolbar>\n                    <IonSearchbar value={this.state.pickInstrutor.query} onIonChange={e => this.setQuery(e.detail.value!)} placeholder=\"Email do instrutor...\">\n                    </IonSearchbar>\n            </IonToolbar>\n            </IonItem>{this.state.pickInstrutor.list_now.length!==0? (\n        <IonItem>\n            <IonList>\n                    {this.state.pickInstrutor.list_now.map(\n                    (element)=> { return(\n                    <IonItem key={element} className=\"item\" button={true}  onClick={() =>this.selectInstrutor(element)}>\n                        <IonIcon className=\"icon\" icon ={personCircle}></IonIcon>\n                        <IonLabel color=\"primary\" >{element}</IonLabel>\n                    </IonItem>\n                    )}\n                    )}\n    </IonList>\n    </IonItem>\n            ):(<React.Fragment></React.Fragment>) }\n            \n\n</IonCard>\n\n<IonRow className=\"avalRow\">\n{localVals.map((elem)=>\n    \n    <IonCard key={elem.data + elem.instrutor_nome} className=\"cardCol\">\n    <IonItem><IonIcon icon={calendarOutline }></IonIcon><IonLabel>&nbsp;Data: {elem.data}</IonLabel></IonItem>\n    <IonItem><IonIcon icon={personCircleOutline}></IonIcon><IonLabel>&nbsp;Instrutor: {elem.instrutor_nome}</IonLabel></IonItem>\n    </IonCard>\n   \n)}\n</IonRow>\n\n<IonCard className = \"cardAval\">\n\n</IonCard>\n</IonContent>\n\n</IonPage>\n        )\n}\n    \n}\n\nexport default AgendarAvaliacao;"]},"metadata":{},"sourceType":"module"}